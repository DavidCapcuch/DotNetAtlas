{
  // Cross-Cutting Concerns
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft.EntityFrameworkCore": "Warning",
        "Microsoft": "Warning"
      }
    }
  },
  "OTEL_EXPORTER_OTLP_ENDPOINT": "http://localhost:4317",
  "AllowedHosts": "*",
  // Infrastructure layer
  // Data
  "ConnectionStrings": {
    "Outbox": "Data Source=127.0.0.1,12345;Initial Catalog=Weather;Persist Security Info=False;User ID=sa;Password=breK3k3$;Encrypt=True;TrustServerCertificate=True"
  },
  "EfCore": {
    "DbContextPoolSize": 10,
    "RetryMaxCount": 6,
    "RetryMaxDelaySeconds": 30,
    "EnableDetailedErrors": true
  },
  // Communication & Messaging
  "KafkaProducer": {
    "ClientId": "outbox-relay-worker",
    "BootstrapServers": "localhost:9094",
    "Acks": "All",
    "EnableIdempotence": true,
    "MaxInFlight": 5,
    "CompressionType": "None",
    "LingerMs": 5,
    "BatchSize": 16384,
    "MaxMessageBytes": 1048576,
    "MessageTimeoutMs": 300000,
    "RequestTimeoutMs": 30000,
    "MessageSendMaxRetries": 10,
    "RetryBackoffMs": 100
  },
  // Background Processing
  "OutboxRelay": {
    "PollingIntervalMs": 1000,
    "BatchSize": 1000,
    "DefaultTopicName": "weather.feedback.events",
    "SchemaName": "weather",
    "TableName": "OutboxMessages",
    "FlushTimeoutMs": 30000,
    "ShutdownTimeoutMs": 60000,
    "TypeTopicMappings": {
      "FeedbackCreatedEvent": "weather.feedback.events",
      "FeedbackChangedEvent": "weather.feedback.events"
    }
  },
  // Health Monitoring
  "OutboxRelayHealthCheck": {
    "DegradedThresholdMultiplier": 1.5,
    "UnhealthyThresholdMultiplier": 3.0,
    "MinimumDegradedThreshold": "00:00:30",
    "MinimumUnhealthyThreshold": "00:01:00",
    "StartupGracePeriod": "00:02:00"
  },
  "HealthChecks": {
    "SelfTimeout": "00:00:02",
    "OutboxRelayExecutionTimeout": "00:00:05",
    "KafkaTimeout": "00:00:03",
    "OutboxLag": {
      "WarningThreshold": 100,
      "ErrorThreshold": 1000
    }
  },
  "OutboxMetricsCollector": {
    "ReportIntervalSeconds": 5
  }
}
